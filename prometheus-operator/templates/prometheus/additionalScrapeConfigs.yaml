{{- if and .Values.prometheus.enabled .Values.prometheus.prometheusSpec.additionalScrapeConfigs }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "prometheus-operator.fullname" . }}-prometheus-scrape-confg
  labels:
    app: {{ template "prometheus-operator.name" . }}-prometheus-scrape-confg
{{ include "prometheus-operator.labels" . | indent 4 }}
data:
  additional-scrape-configs.yaml: {{ "ICAgICAgLSBqb2JfbmFtZTogJ2t1YmVybmV0ZXMtcG9kcycKICAgICAgICBrdWJlcm5ldGVzX3NkX2NvbmZpZ3M6CiAgICAgICAgLSByb2xlOiBwb2QKICAgICAgICByZWxhYmVsX2NvbmZpZ3M6CiAgICAgICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19zY3JhcGVdCiAgICAgICAgICBhY3Rpb246IGtlZXAKICAgICAgICAgIHJlZ2V4OiB0cnVlCiAgICAgICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX2Fubm90YXRpb25fcHJvbWV0aGV1c19pb19wYXRoXQogICAgICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgICAgICB0YXJnZXRfbGFiZWw6IF9fbWV0cmljc19wYXRoX18KICAgICAgICAgIHJlZ2V4OiAoLispCiAgICAgICAgLSBzb3VyY2VfbGFiZWxzOiBbX19hZGRyZXNzX18sIF9fbWV0YV9rdWJlcm5ldGVzX3BvZF9hbm5vdGF0aW9uX3Byb21ldGhldXNfaW9fcG9ydF0KICAgICAgICAgIGFjdGlvbjogcmVwbGFjZQogICAgICAgICAgcmVnZXg6IChbXjpdKykoPzo6XGQrKT87KFxkKykKICAgICAgICAgIHJlcGxhY2VtZW50OiAkMTokMgogICAgICAgICAgdGFyZ2V0X2xhYmVsOiBfX2FkZHJlc3NfXwogICAgICAgIC0gYWN0aW9uOiBsYWJlbG1hcAogICAgICAgICAgcmVnZXg6IF9fbWV0YV9rdWJlcm5ldGVzX3BvZF9sYWJlbF8oLispCiAgICAgICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfbmFtZXNwYWNlXQogICAgICAgICAgYWN0aW9uOiByZXBsYWNlCiAgICAgICAgICB0YXJnZXRfbGFiZWw6IGt1YmVybmV0ZXNfbmFtZXNwYWNlCiAgICAgICAgLSBzb3VyY2VfbGFiZWxzOiBbX19tZXRhX2t1YmVybmV0ZXNfcG9kX25hbWVdCiAgICAgICAgICBhY3Rpb246IHJlcGxhY2UKICAgICAgICAgIHRhcmdldF9sYWJlbDoga3ViZXJuZXRlc19wb2RfbmFtZQo=" | quote }}
{{- end }}